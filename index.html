<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>自訂畫布圖片排版工具</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h1>自訂畫布圖片排版工具（透明 PNG）</h1>

      <!-- 畫布設定 -->
      <div class="row">
        <label>
          畫布寬度(px)：
          <input type="number" id="canvasWidthInput" value="500" min="50" />
        </label>
        <label>
          畫布高度(px)：
          <input type="number" id="canvasHeightInput" value="400" min="50" />
        </label>
        <button id="btnUpdateCanvas">建立 / 更新畫布</button>
        <span id="canvasInfo" class="canvas-info"></span>
      </div>

      <!-- 載入圖片 -->
      <div class="row">
        <input type="file" id="fileInput" accept="image/*" />
        <span class="hint">也可以直接把圖片拖曳到下面灰白格子區。</span>
      </div>

      <p class="hint">
        操作：設定畫布尺寸 → 建立畫布 → 載入或拖曳圖片 → 左鍵拖曳移動圖片，
        滾輪縮放圖片（等比例），Alt + 滾輪縮放畫布預覽 → 使用拉伸點微調 →
        按「下載 PNG」匯出。
      </p>

      <!-- 畫布預覽 -->
      <div id="canvasPreview">
        <div id="photoWrapper" style="display: none">
          <img id="photoLayer" alt="photo" draggable="false" />
          <!-- 8 個拉伸點 -->
          <div class="handle handle-nw" data-dir="nw"></div>
          <div class="handle handle-n" data-dir="n"></div>
          <div class="handle handle-ne" data-dir="ne"></div>

          <div class="handle handle-e" data-dir="e"></div>
          <div class="handle handle-se" data-dir="se"></div>
          <div class="handle handle-s" data-dir="s"></div>

          <div class="handle handle-sw" data-dir="sw"></div>
          <div class="handle handle-w" data-dir="w"></div>
        </div>

        <div id="dropOverlay">
          將圖片拖曳到這裡，<br />
          或使用上方「選擇檔案」載入。
        </div>
      </div>

      <!-- 控制按鈕 -->
      <div class="controls">
        <button class="secondary" id="btnCenter">置中圖片</button>
        <button class="secondary" id="btnResetZoom">
          重設縮放（完整塞進畫布）
        </button>
        <button class="secondary" id="btnCover">填滿畫布（cover）</button>
        <button id="btnDownload">下載 PNG</button>
      </div>

      <p class="hint">
        Alt + 滾輪：只會放大／縮小「預覽畫布」，不影響最後匯出的 PNG 尺寸。
      </p>
    </div>

    <script type="module" src="js/canvas.js"></script>
  </body>
</html>
